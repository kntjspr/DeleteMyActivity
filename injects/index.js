/** @license ESUIT
 * COPYRIGHT (C) 2023 ESUIT. ALL RIGHTS RESERVED.
 *
 * This code is the intellectual property of ESUIT and is protected by
 * copyright law. Any unauthorized use, copying or reproduction of this
 * code without the expressed written permission of ESUIT is strictly
 * prohibited.
 *
 * For more information, please visit https://esuit.dev/.
 */(function(){function oe(k,L){function X(){k()?L():requestAnimationFrame(X)}X()}oe(()=>!!window.requireLazy,()=>{oe(()=>!!window.delete_my_activity_for_facebook_vendors,()=>{window.requireLazy(["react","__debug"],Ce)})});function Ce(){const k=Se();if(k){const L=window.require("react"),X=window.require(k),De=Ie();(function(e,i,D,w,Z,Te){"use strict";const R="ESUIT | Delete My Activity for Facebookâ„¢",z="delete-my-activity-for-facebook",be="pehigcimajndnpmoeocbhlhljodmlbgb",le="https://chrome.google.com/webstore/detail/esuit-delete-my-activity/pehigcimajndnpmoeocbhlhljodmlbgb",se="https://www.facebook.com/esuitdev/videos/1413108082751975",ee="3252001",j=e.createContext(null);function Ae(t){const[n,r]=i.message.useMessage(),[o,a]=i.Modal.useModal();return e.createElement(j.Provider,{value:{messageApi:n,modalApi:o}},r,a,t.children)}function H(t,n){if(!t)return"";if(!n)return t;let r=new RegExp(n.split(",").join("|"),"gi");return t.replace(r,o=>`<span style="color:#f20">${o}</span>`)}function ke(){return~window.location.search.indexOf("debug")?!0:window[z]?!window[z].isProdMode:!0}function Me(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const n=Math.random()*16|0;return(t==="x"?n:n&3|8).toString(16)})}function Fe(t,n){return t.length<=n?t:t.slice(0,n)+"..."}function Oe(){return Math.ceil(new Date().getTime()/1e3)}function ze(t){const n=Date.now(),r=[{label:"All",value:null}];if(t<=0||t>=n)return r;const o=new Date(t*1e3).getFullYear(),a=new Date(n).getFullYear();for(let l=a;l>=o;l--)r.push({label:String(l),value:l});return r}function Ne(t,n){if(t==null||t===0)return null;const r=[{label:"All",value:null}],o=new Date(t*1e3),a=new Date(Date.now()),l=o.getFullYear()===n?o.getMonth()+1:1,s=a.getFullYear()===n?a.getMonth()+1:12;for(let f=s;f>=l;f--)r.push({label:String(f),value:f});return r}var T=(t=>(t[t.START=0]="START",t[t.FETCHING=1]="FETCHING",t[t.DONE=2]="DONE",t[t.Restricted=3]="Restricted",t))(T||{});const b=e.createContext(null);function Le(t){const{messageApi:n}=e.useContext(j),r=e.useRef(!0),o=e.useRef([]),a=e.useRef(!1),l=e.useRef(0),s=e.useRef([]),[f,E]=e.useState(0),[u,c]=e.useState(!1),[p,d]=e.useState(!1),[g,C]=e.useState(0);e.useEffect(()=>{!u&&x()},[u]);const y=()=>{E(Math.random())};function h(_,B){s.current.length>200&&(s.current=[]),s.current.push({id:Me(),status:_,message:B}),s.current=[...s.current],y()}function S(_,B){const K=o.current.find(G=>G.id===_);if(K){const G=o.current.indexOf(K);o.current[G]={...K,...B}}o.current=[...o.current],y()}function I(_){o.current.push(..._),o.current=D.unionBy([...o.current],"id"),y()}function A(_){l.current=_,y()}function x(){O(),C(0),y()}function O(){a.current=!1,r.current=!0,o.current=[],l.current=0,s.current=[],d(!1),y()}function m(_){a.current=_,y()}function v(_){if(_)return c(_);c(_),window._is_have_deleted_activities&&(n.success("Activities data changed, the page will be refreshed automatically."),setTimeout(()=>{window.location.reload()},2e3),window._is_have_deleted_activities=!1)}return e.createElement(b.Provider,{value:{open:u,setOpen:v,openDrawer:p,setOpenDrawer:d,isStopManually:r,logsRef:s,addLog:h,avoidAccountRestrictMSRef:l,setAvoidAccountRestrictMSRef:A,updateNeedToDeletePost:S,appendNeedToDeletePosts:I,isFetchingNextPage:a,setIsFetchingNextPage:m,needToDeletePostsRef:o,setStep:C,step:g,resetStatus:x,resetSoft:O,updateUI:y}},t.children)}function Ke(){const{avoidAccountRestrictMSRef:t}=e.useContext(b);return e.createElement("div",{style:{minHeight:28}},t.current?e.createElement("span",null,e.createElement(i.Spin,{size:"small"}),e.createElement("span",{style:{paddingLeft:6,color:"#DC2625"}},"To avoid account restrictions, please wait for"," ",(t.current/1e3).toFixed(1)," seconds.")):e.createElement(e.Fragment,null))}function ae(t){const n=`${t.extLink}/reviews`;return w.jsxs("div",{style:{color:"inherit",margin:"24px auto 0 auto"},children:[w.jsx("div",{children:" ðŸ™We greatly appreciate your support! ðŸ™"}),w.jsx(i.Rate,{onChange:()=>{window.open(n,"_blank")},defaultValue:5}),w.jsx("div",{children:w.jsx("a",{href:n,target:"_blank",children:"Help us out with a review for our Chrome extension!"})}),w.jsx("div",{children:"Your feedback is essential.ðŸ‘ðŸ¼ðŸ‘ðŸ¼ðŸ‘ðŸ¼"})]})}const P=e.createContext(null);function Pe(t){return e.createElement(P.Provider,{value:{userId:t.userId}},t.children)}var Ue=Object.defineProperty,Ye=(t,n,r)=>n in t?Ue(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,J=(t,n,r)=>(Ye(t,typeof n!="symbol"?n+"":n,r),r);class Be{constructor(n,r){J(this,"id"),J(this,"listeners",{}),J(this,"slug"),J(this,"isDebugger"),this.slug=n,this.isDebugger=!!r,this.id=window[n].id,this.bindEvent()}on(n,r){return this.listeners[n]=this.listeners[n]||[],this.listeners[n].push(r),()=>{if(this.listeners[n].includes(r)){const o=this.listeners[n].indexOf(r);this.listeners[n].splice(o,1)}}}send(n,...r){return new Promise(async o=>{let a={action:n,payload:r};this.isDebugger&&console.log("send message from page",a),chrome.runtime.sendMessage(this.id,a,{},l=>{this.isDebugger&&console.log("received message from page send callback",l),o(l)})})}connect(){chrome.runtime.sendMessage(this.id,{action:"__connect"})}disconnect(){chrome.runtime.sendMessage(this.id,{action:"__disconnect"})}bindEvent(){window.addEventListener("message",this._handleReceivingMessage.bind(this))}destroy(){this.disconnect(),this.listeners={},window.removeEventListener("message",this._handleReceivingMessage.bind(this))}_handleReceivingMessage(n){if(n.data&&n.data.from===this.slug&&n.data.payload){const{action:r,payload:o}=n.data.payload;if(this.isDebugger&&console.log("received message from background",n.data),this.listeners[r])for(let a of this.listeners[r])a(...o)}}}let je=new Be(z,ke());function M(){return je}function ce(t){const{userId:n}=e.useContext(P),{step:r,openDrawer:o,setOpenDrawer:a}=e.useContext(b),[l,s]=e.useState(0);e.useEffect(()=>{M().send("getNeedToDeleteRecords",n).then(E=>{s(E.length)})},[n,r,o]);function f(){a(!0)}return l?e.createElement(i.Button,{...t,onClick:f},l," activities pending deletion"):e.createElement(e.Fragment,null)}var He=(t=>(t.SUBSCRIPTION="subscription",t.PAYMENT="payment",t))(He||{}),te=(t=>(t.FREE="free",t.BASIC="basic",t.PREMIUM="premium",t))(te||{}),qe=(t=>(t.TRIALING="trialing",t.ACTIVE="active",t))(qe||{}),Ve=(t=>(t.SUCCEEDED="succeeded",t))(Ve||{});function ne(){const t="Dg9tDhjPBMCJwdsKweIaEzNjVBqJwdsKweIaEBwfWJwdsKweIaEmunbEvfVtaJwdsKweIaEu0Hblti1nGJwdsKweIaEzgLNzxn0JwdsKweIaEC3vIDgXLJwdsKweIaECgfKu3rHCNqJwdsKweIaEntKYmdqXnM9brMjdzGJwdsKweIaEreDRsvKJwdsKweIaEmZiZote4vKTzqufoJwdsKweIaEzvDTELCJwdsKweIaEAM9PBGJwdsKweIaEmteXntu4ogz5DfLuqqJwdsKweIaEmJiWotGWB2nLt0jQJwdsKweIaEDuLjs3KJwdsKweIaEzMXVB3iJwdsKweIaEC3rYAw5NAwz5JwdsKweIaEzw5JB2rLJwdsKweIaEz2v0vgLTzqJwdsKweIaEndjpsxjQsMyJwdsKweIaEnJy4otbADeP5DvmJwdsKweIaEmtm5ntaZou5itLPRDaJwdsKweIaEmZGWmZmYofjSqNzorW".split("JwdsKweIaE");return(ne=function(){return t})()}function F(t,n){const r=ne();return F=function(o,a){let l=r[o-=233];F.fibnLZ===void 0&&(F.bUtAoH=function(E){let u="",c="";for(let p,d,g=0,C=0;d=E.charAt(C++);~d&&(p=g%4?64*p+d:d,g++%4)?u+=String.fromCharCode(255&p>>(-2*g&6)):0)d="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(d);for(let p=0,d=u.length;p<d;p++)c+="%"+("00"+u.charCodeAt(p).toString(16)).slice(-2);return decodeURIComponent(c)},t=arguments,F.fibnLZ=!0);const s=o+r[0],f=t[s];return f?l=f:(l=F.bUtAoH(l),t[s]=l),l},F(t,n)}async function Ge(t,n,r){const l=F,s=F,f=F,E={eWmzW:function(p,d){return p+d},DGkIY:function(p,d){return p/d},uIIKy:l(253)},u=new TextEncoder()[s(243)](JSON[l(242)]({projectId:t,extensionId:n,createAt:E[l(236)](Math[l(241)](E[f(234)](new Date()[l(244)](),1e5)),r?1:0)})),c=await crypto[s(255)][l(254)](E[s(240)],u);return Array[s(250)](new Uint8Array(c))[s(251)](p=>p[l(249)](16)[f(256)](2,"0"))[f(237)]("")}(function(t,n){const E=F,u=F,c=F,p=ne();for(;;)try{if(parseInt(E(252))/1*(-parseInt(u(246))/2)+parseInt(c(247))/3+-parseInt(u(238))/4+-parseInt(E(239))/5+parseInt(u(245))/6*(parseInt(u(235))/7)+parseInt(E(248))/8+-parseInt(E(233))/9==249985)break;p.push(p.shift())}catch{p.push(p.shift())}})();function Je(t){const{messageInstance:n,defaultMemoConfig:r,onGetMemoSettings:o,modalApi:a,projectId:l,extId:s}=t,f=`${t.projectId.replaceAll("-","_")}`;async function E(){n.send("visitPricingPage",await Ge(l,s))}function u(d,g){return w.jsxs("div",{style:{color:"var(--primary-text)"},children:[w.jsx("div",{style:{marginBottom:12,fontSize:14,lineHeight:"1.4em"},children:"This feature is designed for professional users."}),g?w.jsxs(w.Fragment,{children:[w.jsx("div",{style:{fontSize:18},children:g}),w.jsx("div",{style:{margin:"12px 0 0 0",textAlign:"left",fontSize:12,opacity:.4},children:"OR"})]}):null,w.jsxs("div",{style:{fontSize:14,lineHeight:"1.4em"},children:["Upgrade to the"," ",w.jsx(w.Fragment,{children:d.permission===10?w.jsx("span",{style:{fontSize:12,display:"inline-block",padding:"0 7px",border:"1px solid #389e0d",color:"#389e0d",borderRadius:4},children:te.BASIC}):w.jsx("span",{style:{fontSize:12,display:"inline-block",padding:"0 7px",border:"1px solid #0958d9",color:"#0958d9",borderRadius:4},children:te.PREMIUM})})," ","plan to unlock the unlimited version.",w.jsx("button",{style:{color:"#1677ff",backgroundColor:"transparent",fontSize:14,padding:"0",outline:"none",textAlign:"center",cursor:"pointer",border:"none",marginLeft:8},onClick:E,children:"Upgrade Now!"})]})]})}function c(d){const g=`do-not-show-permission-check${encodeURIComponent(d)}`;n.send("setPersistLocalStorage",g,1)}async function p(d){const g=`do-not-show-permission-check${encodeURIComponent(d)}`;return await n.send("getPersistLocalStorage",g,0)}return e.useEffect(()=>{(async()=>{const d=await n.send("getUIMemoSettings");o(d)})()},[]),{checkIfCanUseWithModal:function(d,g,C){if(!window[f][d])return console.error(d,"not exist"),Promise.resolve(!1);const y=window[f][d];return!y.needUpgrade||y._.memoKey&&r[y._.memoKey]!==void 0&&g===r[y._.memoKey]?Promise.resolve(!0):new Promise(async h=>{if(y.isCanFreeTry)if(y.freeTryLeft){if(await p(d))return h(!0);const S=a.confirm({title:"Free trial",content:u(y,w.jsxs(w.Fragment,{children:[w.jsx("b",{style:{fontSize:18},children:y.freeTryLeft})," FREE try remaining."]})),footer:w.jsx("div",{style:{display:"flex",justifyContent:"end",marginTop:24},children:w.jsxs(i.Space,{size:12,children:[w.jsx(i.Button,{type:"text",onClick:()=>{S.destroy(),c(d),h(!0)},children:"Do not show me again!"}),w.jsx(i.Button,{type:"primary",onClick:()=>{S.destroy(),h(!0)},children:"Continue"})]})})})}else a.confirm({title:"Message",content:u(y,w.jsx(w.Fragment,{children:"No free try left."})),okText:"Upgrade Now",cancelText:"close",onOk(){E(),h(!1)},onCancel(){h(!1)}});else if(y.limitation&&y.limitation>0){if(await p(d))return h(!0);const S=a.confirm({content:u(y,w.jsxs(w.Fragment,{children:["The first ",w.jsx("b",{children:y.limitation})," ",C??"times"," are FREE."]})),footer:w.jsx("div",{style:{display:"flex",justifyContent:"end",marginTop:24},children:w.jsxs(i.Space,{size:12,children:[w.jsx(i.Button,{type:"text",onClick:()=>{S.destroy(),c(d),h(!0)},children:"Do not show me again!"}),w.jsx(i.Button,{type:"primary",onClick:()=>{S.destroy(),h(!0)},children:"Continue"})]})})})}else a.confirm({title:"Message",content:u(y),okText:"ok",cancelText:"close",onOk(){h(!1)},onCancel(){h(!1)}})})},setUIMemoSettings:async function(d){await n.send("setUIMemoSettings",d)},getFeatureLimitProcessTimeValue:function(d){const{featureKey:g,currentIndex:C,currentValue:y}=d;if(!window[f][g])throw console.error(g,"not exist"),new Error(`${g} not exist`);const h=window[f][g];if(!h._.memoKey)throw console.error(g,"feature._.memoKey not exist"),new Error(`${g} feature._.memoKey not exist`);const S=r[h._.memoKey];return h.needUpgrade&&C>h.limitation?S:y},checkIfCanUse:function(d){if(!window[f][d])return console.error(d,"not exist"),!1;const g=window[f][d];return!g.needUpgrade||(g.isCanFreeTry&&g.freeTryLeft?"freeTry":!!(g.limitation&&g.limitation>0)&&"limitation")},getUIMemoSettings:async function(){return await n.send("getUIMemoSettings")}}}var ue=(t=>(t.DELETE_TOTAL_LIMIT="DELETE_TOTAL_LIMIT",t.FILTER_BY_RANGE="FILTER_BY_RANGE",t.FILTER_BY_INCLUDE_KEYWORDS="FILTER_BY_INCLUDE_KEYWORDS",t.FILTER_BY_EXCLUDE_KEYWORDS="FILTER_BY_EXCLUDE_KEYWORDS",t))(ue||{});const Y={dateFilter:{year:null,month:null},includesKeywords:"",excludesKeywords:"",fullSpeed:!1,previewDeletion:!1,requestDelay:0},U=e.createContext(null);function We(t){const{modalApi:n,messageApi:r}=e.useContext(j),[o,a]=e.useState(Y.dateFilter),[l,s]=e.useState(Y.includesKeywords),[f,E]=e.useState(Y.excludesKeywords),[u,c]=e.useState(Y.previewDeletion),[p,d]=e.useState(Y.requestDelay),[g,C]=e.useState(Y.fullSpeed),{setUIMemoSettings:y,checkIfCanUseWithModal:h,getFeatureLimitProcessTimeValue:S}=Je({projectId:z,extId:be,modalApi:n,messageApi:r,messageInstance:M(),defaultMemoConfig:Y,onGetMemoSettings(x){a(x.dateFilter),s(x.includesKeywords),E(x.excludesKeywords),C(x.fullSpeed),c(x.previewDeletion),d(x.requestDelay)}}),I=e.useCallback(()=>{y({dateFilter:o,includesKeywords:l,excludesKeywords:f,fullSpeed:g,previewDeletion:u,requestDelay:p})},[o,l,f,g,u,p]);function A(x){const O=`${z}-disclaimer`,m=localStorage.getItem(O);x&&!m?n.confirm({content:e.createElement("div",null,"FullSpeed option will cause frequent API requests, you"," ",e.createElement("b",null,"have to")," agree our"," ",e.createElement("a",{target:"_blank",style:{color:"#faad14"},href:"https://esuit.dev/disclaimer"},"Disclaimer"),e.createElement("span",{className:"disclaimer-level level1"})," to turn on this option"),okText:"AGREE",onOk:()=>{localStorage.setItem(O,"1"),C(!0)}}):C(x)}return e.createElement(U.Provider,{value:{dateFilter:o,includesKeywords:l,excludesKeywords:f,fullSpeed:g,previewDeletion:u,requestDelay:p,setRequestDelay:d,setDateFilter:a,setIncludesKeywords:s,setExcludesKeywords:E,setFullSpeed:A,setPreviewDeletion:c,saveMemoSettings:I,checkIfCanUseWithModal:h,getFeatureLimitProcessTimeValue:S}},t.children)}function de(){return e.createElement("p",{style:{opacity:.6}},"Have issues or ðŸ›Bug during Download?"," ",e.createElement("a",{href:"https://www.facebook.com/esuitdev/",target:"_blank",style:{paddingRight:8}},"Give us feedback on Facebook"),"and we'll help you fix it!")}function $e(){return e.createElement("p",null,"If you think this is a ðŸ›Bug.",e.createElement("a",{href:"https://www.facebook.com/esuitdev/",target:"_blank",style:{paddingRight:8}},"Give us feedback on Facebook"),"and we'll help you fix it!")}function Qe(){const t=window[z].extensionFolderUri+window[z].icons[128];return!window.zKjQYvgSmF("sftVuofssvD").getID()?e.createElement("p",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-start",alignItems:"center",color:"var(--primary-text)"}},e.createElement("img",{src:t,style:{width:24,height:24,display:"block",margin:"0 8px"}}),R," You have to logged in!"):e.createElement("p",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-start",alignItems:"center",color:"var(--primary-text)"}},"It Seems"," ",e.createElement("img",{src:t,style:{width:24,height:24,display:"block",margin:"0 8px",color:"#0a7cff"}}),R," not working right now.",e.createElement("a",{href:"https://www.facebook.com/esuitdev/",target:"_blank",style:{paddingRight:8}},"Give us feedback on Facebook"),"and we'll help you fix it!")}function Xe(){const{needToDeletePostsRef:t}=e.useContext(b),{previewDeletion:n}=e.useContext(U);return t.current.length===0||!n&&t.current.filter(r=>r.isDeleted).length===0?e.createElement(i.Alert,{type:"error",message:e.createElement(i.Space,{direction:"vertical",size:12,style:{width:"100%"}},e.createElement("p",{style:{fontSize:24,margin:"8px 0px",textAlign:"center"}},"Unable to find/delete any activities."),e.createElement($e,null))}):e.createElement(e.Fragment,null,e.createElement(i.Alert,{type:"success",message:e.createElement(i.Space,{direction:"vertical",size:12,style:{textAlign:"center",width:"100%"}},n?e.createElement(e.Fragment,null,e.createElement("p",{style:{fontSize:24,margin:"8px 0px"}},"ðŸŽ‰ðŸŽ‰ðŸŽ‰ ",t.current.length," activities have been successfully found for deletion."),e.createElement(ce,{size:"large",type:"primary"}),e.createElement(ae,{extLink:le}),e.createElement(de,null)):e.createElement(e.Fragment,null,e.createElement("p",{style:{fontSize:24,margin:"8px 0px"}},"ðŸŽ‰ðŸŽ‰ðŸŽ‰"," ",t.current.filter(r=>r.isDeleted).length," ","activities have been successfully deleted."),e.createElement(ae,{extLink:le}),e.createElement(de,null)))}))}var N=(t=>(t[t.ERROR=0]="ERROR",t[t.INFO=1]="INFO",t[t.WARNING=2]="WARNING",t))(N||{});function me(){const t=e.useRef(),{logsRef:n}=e.useContext(b);return e.useEffect(()=>{t.current&&(t.current.scrollTop=t.current.scrollHeight)},[n.current,t.current]),e.createElement("div",{ref:t,style:{maxHeight:140,height:140,overflow:"scroll",overflowX:"hidden",borderRadius:4,padding:8,fontSize:12,color:"var(--primary-text)",border:"1px solid var(--secondary-text)"}},n.current.slice(-50).map(r=>e.createElement("div",{key:r.id},r.status===N.INFO&&e.createElement("span",null,r.message),r.status===N.WARNING&&e.createElement("span",{style:{color:"rgb(250, 173, 20)"}},r.message),r.status===N.ERROR&&e.createElement("span",{style:{color:"#f20"}},r.message))))}const V=e.createContext(null);function Ze(t){const{step:n}=e.useContext(b),r=e.useRef(0);e.useEffect(()=>{n===T.START&&M().send("getDeleteCount").then(l=>{r.current=l||0})},[n]);function o(){M().send("increaseDeleteCount"),r.current=0}function a(){const l=window.delete_my_activity_for_facebook[ue.DELETE_TOTAL_LIMIT];return l?l.limitation===0?!1:r.current>=l.limitation:(console.error("cannot find config! code: 458"),!0)}return e.createElement(V.Provider,{value:{currentDeleteCount:50000,increaseDeleteCount:o,isLimited:a}},t.children)}const Re=["DELETE","DELETE_GROUP_CONTENT","DELETE_NEIGHBORHOOD_CONTENT","DELETE_HISTORICAL_RELATIONSHIP","DELETE_POA_SURVEY","DELETE_PREVIOUS_CONTACTPOINT","DELETE_SAVE","DELETE_USER_EVENT_CONNECTION","CLEAR_SEARCH_HISTORY","HIDE_FROM_TIMELINE","MOVE_TO_TRASH","REMOVE_COMMENT","REMOVE_COMMENT_VOTE","REMOVE_LIGHTWEIGHT_REACTION","REMOVE_LIVE_GAMING_EVENT_CONNECTION","REMOVE_PRAYER_RESPONSE","REMOVE_PRAYER_RESPONSE_THANKS","REMOVE_REACTION","REMOVE_REPORT_TAG","REMOVE_SAVE","REMOVE_TAG","REMOVE_VIDEO_WATCH","REMOVE_FCS_AWARDS_VOTE","RESTORE_FROM_ARCHIVE","RESTORE_FROM_TRASH","UNFAN_FBPAGE","UNFRIEND","UNLIKE","UNREGISTER_ARENA","UNSUBSCRIBE_CALENDAR","UNVOTE"];function et(t){const n=t.find(r=>Re.includes(r.key));return n?n.key:null}function fe(t){return tt(t.posts,t.includesKeywords,t.excludesKeywords)}function tt(t,n,r){let o=n?n.trim().split(",").map(l=>l.trim()):[],a=r?r.trim().split(",").map(l=>l.trim()):[];return!n&&!r?t:n&&!r?t.filter(l=>o.some(s=>W(l,s))):!n&&r?t.filter(l=>!a.some(s=>W(l,s))):t.filter(l=>o.some(s=>W(l,s))&&!a.some(s=>W(l,s)))}function W(t,n){return $(t.message,n)||$(t.comment,n)||$(t.summary,n)||$(t.scope,n)}function $(t,n){return n.length===0||!t?!1:t.toLowerCase().includes(n.toLowerCase())}function pe(){const{fullSpeed:t}=e.useContext(U),{step:n,setAvoidAccountRestrictMSRef:r}=e.useContext(b),o=e.useRef(0);e.useEffect(()=>{o.current=0},[n]);async function a(){if(t)return;o.current+=1;let l=o.current*100;if(l=Math.ceil(Math.random()*l+500),l<1e3)return r(0);if(l>5e3){o.current=0,r(0);return}r(l),await new Promise(s=>setTimeout(()=>{r(0),s()},l))}return{AvoidAccountRestrict:a}}let re=0,q=!1;const nt=15*1e3;function ge(){const t=e.useMemo(()=>window.zKjQYvgSmF("zbmfSufnpD").useRelayEnvironment(),[]);function n(o,a,l){let s=[];return q=!1,new Promise((f,E)=>{let u=window.zKjQYvgSmF("zbmfSufnpD").loadQuery(t,window.require(`${o}.graphql`),a,{fetchPolicy:"network-only"});u.source.subscribe({next(c){if(s.push(...c),l){q=!0,u.dispose(),u=null,f(s);return}window.clearTimeout(re),re=setTimeout(()=>{q||(console.log("complete/next stuck"),q=!0,u.dispose(),u=null,f(s))},nt)},complete(){clearTimeout(re),q||(q=!0,u.dispose(),u=null,f(s))},error(c){console.error("LoadQuery Error:",c),E(c)}})})}function r(o,a){for(let l of o){const s=D.get(l,a,void 0);if(s!==void 0)return s}}return{loadQuery:n,findValueFromLoadQueryData:r}}function Ee(){const{fullSpeed:t,requestDelay:n}=e.useContext(U);async function r(){t||(await new Promise(o=>setTimeout(()=>{o()},n*1e3)),await new Promise(o=>setTimeout(()=>{o()},D.random(500,1e3))))}return{delay:r}}const ie="_delete_activity_client_mutation_id";function we(){const{addLog:t,updateNeedToDeletePost:n}=e.useContext(b),{increaseDeleteCount:r,isLimited:o}=e.useContext(V),{userId:a}=e.useContext(P),{loadQuery:l}=ge(),{AvoidAccountRestrict:s}=pe(),{delay:f}=Ee(),{messageApi:E}=e.useContext(j);async function u(c){if(!o()){window[ie]=window[ie]||0;try{if(!c.id&&!c.url&&!c.post_id)throw new Error("Post might already deleted");await l("CometActivityLogItemCurationMutation",{input:{action:c.action,category_key:"All",deletion_request_id:null,post_id_str:c.post_id,story_id:c.id,story_location:"ACTIVITY_LOG",actor_id:a,client_mutation_id:++window[ie]}}),n(c.id,{isDeleted:!0}),await M().send("deleteNeedToDeleteRecord",a,c.id),t(N.INFO,`Deleted activity "${Fe(c.summary,80)}"`),window._is_have_deleted_activities=!0,await r()}catch(p){if(console.log(p,c),E.error({content:`delete activity failed ${c.summary}, This might be an error from Facebook, please try deleting them manually.`,key:9}),t(N.ERROR,`Delete activity failed ${c.summary}, This might be an error from Facebook, please try deleting them manually.`),~p.toString().indexOf(ee))return Promise.reject(p)}await f(),await s()}}return{deletePost:u}}const rt=window.zKjQYvgSmF("pjubSmfyjQcfX").get();function it(){const{isStopManually:t,setIsFetchingNextPage:n,addLog:r,appendNeedToDeletePosts:o}=e.useContext(b),{userId:a}=e.useContext(P),{includesKeywords:l,dateFilter:s,excludesKeywords:f,previewDeletion:E}=e.useContext(U),{isLimited:u}=e.useContext(V),c=e.useRef(1),{deletePost:p}=we(),{loadQuery:d}=ge(),{AvoidAccountRestrict:g}=pe(),{delay:C}=Ee();async function y(I){if(t.current||u())return;I===void 0&&(c.current=1);const A=await h(I);if(c.current+=1,await C(),await g(),A)return y(A)}async function h(I){const A={audience:null,category:"ALL",category_key:"ALL",count:25,cursor:I,feedLocation:null,media_content_filters:[],month:s.month,person_id:null,privacy:"NONE",scale:rt,timeline_visibility:"ALL",year:s.year,id:a};n(!0);let x=await d("CometActivityLogStoriesListPaginationQuery",A);x=x[0],n(!1);const O=D.get(x,"data.node.activity_log_stories.edges",[]),m=D.get(x,"data.node.activity_log_stories.page_info",!1),v=S(O);let _=fe({posts:v,includesKeywords:l,excludesKeywords:f});_=_.filter(K=>!!K.id);let B=`${c.current}: Found ${v.length} activities and ${_.length} of them matched the filter rules. cursor: ${I||""}`;if(r(N.INFO,B),o([..._]),await M().send("appendNeedToDeleteRecords",a,[..._]),E)_.length>0&&r(N.INFO,`Filter out ${_.length} activities and added to preview cache`);else for(let K of _){if(t.current||u())return null;await p(K)}return m&&m.has_next_page?m.end_cursor:null}function S(I){let A=[];for(let x of I){const O=et(x.options);if(!O){console.log("no action for edge",x);continue}const m=x.node;let v=D.get(m,"attachments[0].title_with_entities.text","")||D.get(m,"attached_story.message.text","")||D.get(m,"message.text","")||D.get(m,"attachments[0].subtitle",""),_=D.get(m,"attached_story.privacy_scope.label","")||D.get(m,"privacy_scope.label",""),B=D.get(m,"attachments[0].media.image.uri","")||D.get(m,"attached_story.attachments[0].media.image.uri","")||D.get(m,"actors[0].profile_picture.uri",""),K=D.get(m,"attachments[0].url","")||m.url,G=D.get(m,"summary.text","")||v;const wt={id:m.id,post_id:m.post_id,url:K,isDeleted:!1,creation_time:m.creation_time,includesKeywords:l,summary:G,comment:D.get(m,"feedback_context.relevant_comments[0].body.text",""),message:v,scope:_,thumbnail:B,action:O,fetchedAt:Oe()};A.push(wt)}return A}return{startFetch:y}}function ot(){const{previewDeletion:t,saveMemoSettings:n}=e.useContext(U),{messageApi:r,modalApi:o}=e.useContext(j),{userId:a}=e.useContext(P),{isStopManually:l,setStep:s,resetSoft:f,setOpenDrawer:E,addLog:u}=e.useContext(b),{isLimited:c}=e.useContext(V),{startFetch:p}=it();async function d(){await g()||(n(),f(),l.current=!1,s(T.FETCHING),p().then(h=>{c()?u(N.WARNING,"Maximum deletion limit reached."):(l.current=!0,s(T.DONE),u(N.INFO,"Done"))}).catch(h=>{console.error(h),r.error(h.toString()),l.current=!0,~h.toString().indexOf(ee)&&s(T.Restricted)}))}async function g(){return new Promise(async h=>{let S=[C(),await y()];if(S=S.filter(I=>!!I),S.length===0)return h(!1);o.confirm({title:"Continue after confirmation",width:640,style:{padding:0},icon:null,content:e.createElement(i.Space,{direction:"vertical"},S.map((I,A)=>e.createElement("div",{key:A},I))),okText:"Agree to all and Continue",async onOk(){await M().send("cleanNeedToDeleteRecord",a),h(!1)},onCancel(){h(!0)}})})}function C(){return t?null:e.createElement(i.Card,{size:"small",bordered:!0,title:"â—ï¸ Disclaimer"},'The "ðŸ”Preview Deletion" feature is currently turned off, which means activities will be deleted after fetching. This action is'," ",e.createElement("span",{style:{color:"#f20"}},"risky and cannot be reversed."),"The"," ",e.createElement("a",{href:"https://esuit.dev/",target:"_blank"},"ESUIT Development")," ","Team accepts no responsibility for this.")}async function y(){const h=await M().send("getNeedToDeleteRecords",a);return h.length===0?null:e.createElement(i.Card,{size:"small",bordered:!0,title:"ðŸ”” Unfinished tasks"},e.createElement("b",null,h.length)," pending activities need to delete. Re-start will remove them all from the local cache.",e.createElement(i.Row,{justify:"center"},e.createElement(i.Button,{type:"primary",onClick:()=>E(!0)},"Delete Pending Activities Now!")))}return e.createElement(i.Button,{type:"primary",onClick:d},"Start")}function lt(){const{step:t,isStopManually:n,setStep:r,resetStatus:o,setOpen:a}=e.useContext(b);function l(){n.current=!0,r(T.DONE)}function s(){o()}return e.createElement(i.Row,{justify:"space-between"},e.createElement(i.Space,{size:12},t===T.START&&e.createElement(ce,null)),e.createElement(i.Space,{size:12},t===T.START&&e.createElement(ot,null),t===T.FETCHING&&e.createElement(i.Button,{danger:!0,type:"primary",onClick:l},"Stop"),t===T.DONE&&e.createElement(e.Fragment,null,e.createElement(i.Button,{type:"text",onClick:s},"Restart"),e.createElement(i.Button,{onClick:()=>a(!1)},"Close")),t===T.Restricted&&e.createElement(e.Fragment,null,e.createElement(i.Button,{onClick:()=>a(!1)},"Close"))))}function ye(){const{isLimited:t}=e.useContext(V);return t()?e.createElement("div",{style:{position:"absolute",left:0,right:0,bottom:0,top:0,display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",backgroundColor:"var(--overlay-alpha-80)",zIndex:9}},e.createElement(i.Alert,{type:"warning",style:{width:420},message:e.createElement(i.Space,{direction:"vertical",size:12},e.createElement("div",null,"For our valued free users, we currently offer a generous allotment of"," ",e.createElement("b",null,window.delete_my_activity_for_facebook.DELETE_TOTAL_LIMIT.limitation)," ","deletion credits, we would like to extend an invitation for you to upgrade and enjoy the benefits of unlimited version."),e.createElement(i.Button,{type:"primary",onClick:()=>M().send("visitPricing")},"Upgrade Now!"))})):e.createElement(e.Fragment,null)}function st(){const{needToDeletePostsRef:t,isFetchingNextPage:n}=e.useContext(b);return e.createElement(i.Space,{direction:"vertical",style:{position:"relative",width:"100%"},size:8},e.createElement(i.Table,{dataSource:t.current.slice(-100),pagination:!1,loading:n.current?{tip:"Fetching next page..."}:!1,bordered:!0,size:"small",scroll:{y:"280px"},footer:()=>e.createElement(i.Space,{size:12},e.createElement("div",null,"Found ",e.createElement("b",null,t.current.length)," activities need to delete")),rowKey:"id"},e.createElement(i.Table.Column,{title:"Deleted",dataIndex:"isDeleted",key:"isDeleted",width:100,render:(r,o)=>o.isDeleted?e.createElement(i.Badge,{status:"error",text:"Deleted"}):e.createElement("span",{style:{opacity:.6}},"no")}),e.createElement(i.Table.Column,{title:"Summary",dataIndex:"summary",ellipsis:!0,key:"summary",width:200,render:(r,o)=>e.createElement(i.Space,{size:8},e.createElement(i.Avatar,{size:24,src:o.thumbnail}),e.createElement("a",{style:{fontSize:12},href:o.url,target:"_blank",dangerouslySetInnerHTML:{__html:H(o.summary,o.includesKeywords)}}))}),e.createElement(i.Table.Column,{title:"Message",dataIndex:"message",key:"message",ellipsis:!0,width:220,render:(r,o)=>e.createElement("div",{style:{fontSize:12},dangerouslySetInnerHTML:{__html:H(`${o.message}${o.comment}`,o.includesKeywords)}})}),e.createElement(i.Table.Column,{title:"Scope",dataIndex:"scope",key:"scope",width:100,ellipsis:!0,render:(r,o)=>e.createElement("div",{style:{fontSize:12},dangerouslySetInnerHTML:{__html:H(o.scope,o.includesKeywords)}})}),e.createElement(i.Table.Column,{title:"Date",dataIndex:"creation_time",key:"creation_time",width:150,render:(r,o)=>e.createElement("div",{style:{fontSize:12}},Z.unix(o.creation_time).format("YYYY-MM-DD HH:mm:ss"))}),e.createElement(i.Table.Column,{title:"Action",dataIndex:"action",key:"action",width:160,ellipsis:!0,render:(r,o)=>e.createElement("div",{style:{fontSize:12}},r)})),e.createElement(ye,null))}let he=!1;function ve(){e.useEffect(()=>{he||(window.require("Bootloader").loadModules(["CometActivityLogActionMenu.react"]),he=!0)},[])}function at(){const{dateFilter:t,setDateFilter:n}=e.useContext(U),{userId:r}=e.useContext(P),[o,a]=e.useState(0);e.useEffect(()=>{const u=window.zKjqYvcSmF(r,"join_time");a(Number(u))},[r]);const l=e.useMemo(()=>o?ze(o):[],[o]),s=e.useMemo(()=>o?t.year?Ne(o,t.year):[]:[],[o,t]);function f(u){n({year:u,month:null})}function E(u){n({...t,month:u})}return e.createElement(i.Space,{size:24},e.createElement(i.Space,{size:8},e.createElement("div",null,"Year:"),e.createElement(i.Select,{options:l,style:{width:80},value:t.year,onChange:f,size:"small"})),t.year&&e.createElement(i.Space,{size:8},e.createElement("div",null,"Month:"),e.createElement(i.Select,{options:s,style:{width:80},value:t.month,onChange:E,size:"small"})))}const{TextArea:_e}=i.Input;function ct(){const{fullSpeed:t,setFullSpeed:n,previewDeletion:r,setPreviewDeletion:o,includesKeywords:a,setIncludesKeywords:l,excludesKeywords:s,setExcludesKeywords:f,requestDelay:E,setRequestDelay:u}=e.useContext(U);return e.createElement(i.Space,{direction:"vertical",size:12,style:{width:"100%"}},e.createElement(i.Space,{direction:"horizontal",size:[12,12],wrap:!0,style:{whiteSpace:"nowrap"}},e.createElement(i.Checkbox,{checked:t,onChange:c=>n(c.target.checked)},e.createElement(i.Tooltip,{title:"To prevent account restrictions, It will wait a random number of seconds during each download. If you want to skip it, please enable Full-Speed mode",placement:"top"},e.createElement("span",null,"âš¡ï¸Full Speed"))),e.createElement(i.Checkbox,{checked:r,onChange:c=>o(c.target.checked)},e.createElement(i.Tooltip,{title:"After enabling, Activities will not be directly deleted but will require a secondary confirmation before deletion is permitted (to minimize the risk of accidental deletion).",placement:"top"},e.createElement("span",null,"ðŸ”Preview Deletion"))),e.createElement(Q,{title:"â±ï¸Request Delay",description:t?'This feature does not work when the "âš¡ï¸FullSpeed" is enabled.':"If the FullSpeed option is disabled and you still find the requests too fast, you can set a delay time for each request."},e.createElement(i.InputNumber,{onChange:c=>u(c??0),value:E,max:30,min:0,step:.1,style:{width:150},addonAfter:"seconds",disabled:t}))),e.createElement(i.Card,{size:"small",title:"Activities Filters",bodyStyle:{padding:0},style:{marginTop:24}},e.createElement("div",{style:{padding:16}},e.createElement(i.Row,{style:{width:"100%"},gutter:[12,12]},e.createElement(i.Col,{span:24},e.createElement(Q,{direction:"vertical",title:"Date Filter",description:"Select a specific date to filter activities"},e.createElement(at,null))),e.createElement(i.Col,{span:12},e.createElement(Q,{title:"Keywords",description:'Enter keywords to filter activities (use "," to separate keywords)',direction:"vertical"},e.createElement(_e,{value:a,onChange:c=>l(c.target.value),autoSize:{minRows:2,maxRows:2}}))),e.createElement(i.Col,{span:12},e.createElement(Q,{direction:"vertical",title:"Exclusion Keywords",description:'Enter keywords to exclude specific activities (use "," to separate keywords)'},e.createElement(_e,{value:s,autoSize:{minRows:2,maxRows:2},onChange:c=>f(c.target.value)})))))))}function Q(t){return e.createElement(i.Space,{size:t.direction==="vertical"?0:8,direction:t.direction??"horizontal",style:{width:"100%"}},e.createElement("span",{style:{fontWeight:500}},t.title,t.description&&e.createElement(e.Fragment,null," ",e.createElement(i.Tooltip,{title:t.description},e.createElement(Te.QuestionCircleOutlined,null))),":"),t.children)}function xe(){return e.createElement(i.Alert,{type:"warning",message:e.createElement(i.Space,{size:8,direction:"vertical",style:{fontSize:16,textAlign:"center",width:"100%",paddingTop:42,paddingBottom:42}},e.createElement("div",{style:{fontSize:18,fontWeight:"bold"}},"Your account has been temporarily restricted due to excessive API calls."),e.createElement("div",null,"This restriction is expected to be automatically lifted within"," ",e.createElement("span",{style:{color:"#f20"}},"24")," hours."),e.createElement("div",null,"ðŸ˜¢ðŸ˜¥ We apologize for any inconvenience this may cause."),e.createElement("div",null,"Thank you for your understanding.")),showIcon:!1})}function ut(){const{step:t}=e.useContext(b);return ve(),e.createElement(i.Space,{direction:"vertical",size:24,style:{width:"100%"}},e.createElement(i.Space,{direction:"vertical",size:12,style:{minHeight:340,width:"100%"}},t===T.START&&e.createElement(ct,null),t===T.FETCHING&&e.createElement(e.Fragment,null,e.createElement(st,null),e.createElement(me,null),e.createElement(Ke,null)),t===T.DONE&&e.createElement(e.Fragment,null,e.createElement(Xe,null),e.createElement(me,null)),t===T.Restricted&&e.createElement(xe,null)),e.createElement(lt,null))}const{Search:dt}=i.Input;function mt(){const{userId:t}=e.useContext(P),{isStopManually:n,needToDeletePostsRef:r,updateUI:o,setStep:a,step:l}=e.useContext(b),{messageApi:s}=e.useContext(j),{deletePost:f}=we(),[E,u]=e.useState(!1),[c,p]=e.useState([]),[d,g]=e.useState(""),C=e.useRef([]),y=e.useMemo(()=>d.trim().length===0?r.current:fe({posts:r.current.map(m=>(m.includesKeywords=d,m)),includesKeywords:d,excludesKeywords:""}),[r.current,d]),S={selectedRowKeys:c,onChange:m=>{p(m)},columnWidth:48};ve(),e.useEffect(()=>{M().send("getNeedToDeleteRecords",t).then(m=>{r.current=m,o()})},[]);function I(){if(C.current=[...c],n.current=!1,n.current){u(!1);return}u(!0),x().then(()=>{s.success("Deletion successfully"),u(!1)}).catch(m=>{console.error(m),s.error(m.toString()),n.current=!0,~m.toString().indexOf(ee)&&a(T.Restricted)})}function A(m){g(m)}async function x(){if(n.current||C.current.length===0)return;const m=C.current.shift(),v=r.current.find(_=>_.id===m);v&&!v.isDeleted?(await f(v),await x()):await x()}function O(){n.current=!0,u(!1)}return l===T.Restricted?e.createElement(xe,null):e.createElement("div",{style:{position:"relative"}},e.createElement(i.Table,{dataSource:y,virtual:!0,pagination:!1,size:"small",scroll:{y:window.innerHeight-200},rowKey:"id",rowSelection:S,bordered:!0,locale:{emptyText:e.createElement("div",{style:{width:"100%",padding:"42px 0",textAlign:"center",fontSize:20}},"There are currently no pending records. Please re-fetch and try again.")},title:()=>e.createElement(i.Row,{justify:"space-between"},e.createElement(i.Space,{size:12},E?e.createElement(e.Fragment,null,e.createElement(i.Spin,null)," ",e.createElement("span",null,"Deleting"),e.createElement(i.Button,{danger:!0,onClick:O},"Stop")):e.createElement(e.Fragment,null,e.createElement(i.Tooltip,{title:c.length===0?"Please select the activities to delete first.":""},e.createElement(i.Button,{type:"primary",onClick:I,disabled:c.length===0},"Delete selected activities"," ",c.length>0?`(${c.length})`:"")))),!E&&e.createElement(dt,{allowClear:!0,defaultValue:d,style:{width:320},placeholder:"Search activities",onSearch:A}))},e.createElement(i.Table.Column,{title:"Deleted",dataIndex:"isDeleted",key:"isDeleted",width:100,render:(m,v)=>v.isDeleted?e.createElement(i.Badge,{status:"error",text:"Deleted"}):e.createElement("span",{style:{opacity:.6}},"no")}),e.createElement(i.Table.Column,{title:"ID",dataIndex:"post_id",key:"post_id",width:200}),e.createElement(i.Table.Column,{title:"Summary",dataIndex:"summary",ellipsis:!0,key:"summary",width:200,render:(m,v)=>e.createElement(i.Space,{size:8},e.createElement(i.Avatar,{size:24,src:v.thumbnail}),e.createElement("a",{style:{fontSize:12},href:v.url,target:"_blank",dangerouslySetInnerHTML:{__html:H(v.summary,v.includesKeywords)}}))}),e.createElement(i.Table.Column,{title:"Message",dataIndex:"message",key:"message",ellipsis:!0,width:220,render:(m,v)=>e.createElement("div",{style:{fontSize:12},dangerouslySetInnerHTML:{__html:H(`${v.message}${v.comment}`,v.includesKeywords)}})}),e.createElement(i.Table.Column,{title:"Scope",dataIndex:"scope",key:"scope",width:100,ellipsis:!0,render:(m,v)=>e.createElement("div",{style:{fontSize:12},dangerouslySetInnerHTML:{__html:H(v.scope,v.includesKeywords)}})}),e.createElement(i.Table.Column,{title:"Date",dataIndex:"creation_time",key:"creation_time",width:150,render:(m,v)=>e.createElement("div",{style:{fontSize:12}},Z.unix(v.creation_time).format("YYYY-MM-DD HH:mm:ss")),sorter:(m,v)=>m.creation_time-v.creation_time}),e.createElement(i.Table.Column,{title:"Action",dataIndex:"action",key:"action",width:160,ellipsis:!0,render:(m,v)=>e.createElement("div",{style:{fontSize:12}},m)}),e.createElement(i.Table.Column,{title:"Fetched At",dataIndex:"fetchedAt",key:"fetchedAt",width:150,render:(m,v)=>e.createElement("div",{style:{fontSize:12}},Z.unix(v.fetchedAt).format("YYYY-MM-DD HH:mm:ss")),sorter:(m,v)=>m.creation_time-v.creation_time})),e.createElement(ye,null))}const ft="1.0.7";function pt(){const{open:t,setOpen:n,openDrawer:r,setOpenDrawer:o}=e.useContext(b),{userId:a}=e.useContext(P);function l(){M().send("clearDeletedRecord",a),o(!1)}const s=e.useMemo(()=>e.createElement(i.Space,{size:12},e.createElement(i.Avatar,{size:24,src:window[z].extensionFolderUri+window[z].icons[128],shape:"square"}),e.createElement("span",null,R," ",e.createElement("span",{style:{color:"#999",fontSize:12}},"v",ft)," ",se.length>0?e.createElement("a",{href:se,target:"_blank",style:{fontSize:12,color:"rgb(47, 129, 247)"}},"what's new?"):null),e.createElement("div",{style:{marginLeft:12}},e.createElement("a",{href:"javascript:;",style:{fontSize:12,color:"rgb(47, 129, 247)"},onClick:()=>M().send("visitPricing")},"pricing")),e.createElement("div",{style:{marginLeft:12}},e.createElement("a",{href:"https://esuit.dev/faq",target:"_blank",style:{fontSize:12,color:"rgb(47, 129, 247)"}},"â“FAQ")),e.createElement("div",{style:{marginLeft:12}},e.createElement("a",{href:"https://www.facebook.com/esuitdev/",target:"_blank",style:{fontSize:12,color:"rgb(47, 129, 247)"}},"ðŸ› Report a bug"))),[]);return e.createElement(e.Fragment,null,e.createElement(i.Modal,{open:t,onCancel:()=>n(!1),width:850,title:s,footer:null},e.createElement(ut,null)),e.createElement(i.Button,{size:"large",icon:e.createElement(i.Avatar,{size:28,src:window[z].extensionFolderUri+window[z].icons[128],shape:"square"}),onClick:()=>n(!0)},"Start to Delete Activity"),e.createElement(i.Drawer,{title:s,open:r,destroyOnClose:!0,onClose:l,placement:"bottom",height:"100vh"},e.createElement(mt,null)))}function gt(t){const n=window.zKjQYvgSmF("udbfs/zsbeovpCspssFufnpD"),r=window.zKjQYvgSmF("fepNlsbEufnpD").getDarkModeSetting()==="ENABLED";return e.createElement(n,{fallback:Et},e.createElement(i.ConfigProvider,{theme:{algorithm:r?i.theme.darkAlgorithm:i.theme.defaultAlgorithm,token:{motion:!1}}},e.createElement(Pe,{userId:t.userId},e.createElement(Ae,null,e.createElement(Le,null,e.createElement(We,null,e.createElement(Ze,null,e.createElement(pt,null))))))))}function Et(t){return console.error(t),e.createElement(Qe,null)}const yt="";window.zKjQYvcSmF("lppcfdbg.spg.zujwjudb.zn.fufmfe}udbfs/xfjWhpMzujwjudBufnpD",t=>{const r=e.useContext(window.zKjQYvgSmF("uyfuopDhpMzujwjudBufnpD").CometActivityLogContext).userId;return r?[e.createElement("div",{style:{position:"absolute",top:16,right:16,zIndex:9999}},e.createElement(gt,{userId:r})),t.lastCmp]:t.lastCmp})})(L,window.delete_my_activity_for_facebook_vendors._.antd,window.delete_my_activity_for_facebook_vendors._["lodash-es"],De,window.delete_my_activity_for_facebook_vendors._.dayjs,window.delete_my_activity_for_facebook_vendors._["@ant-design/icons"])}else console.error(`${k} Not Found`)}function Se(){return Object.keys(window.require("__debug").modulesMap).filter(k=>k.indexOf("ReactDOM")===0).find(k=>{const L=window.require("__debug").modulesMap[k];return!!(L.exports&&L.exports.version&&L.depPosition>3&&k.includes("classic"))})}function Ie(){function k(...L){return window.require("react").jsx(...L)}return{Fragment:Symbol.for("react.fragment"),jsx:k,jsxs:k,jsxDEV:k}}})();
